"use strict";(globalThis.webpackChunkphysical_ai_textbook=globalThis.webpackChunkphysical_ai_textbook||[]).push([[6523],{7864:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"module-1-ros2/week-01-architecture","title":"Week 1: ROS2 Architecture","description":"Understanding nodes, executors, and DDS","source":"@site/docs/module-1-ros2/week-01-architecture.mdx","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/week-01-architecture","permalink":"/textbook-hackathon/module-1-ros2/week-01-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/eDeveloper132/textbook-hackathon/tree/main/docs/module-1-ros2/week-01-architecture.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Week 1: ROS2 Architecture","description":"Understanding nodes, executors, and DDS"},"sidebar":"tutorialSidebar","previous":{"title":"ROS2 Introduction","permalink":"/textbook-hackathon/module-1-ros2/intro"},"next":{"title":"Week 2: Topics, Services & Actions","permalink":"/textbook-hackathon/module-1-ros2/week-02-topics-services"}}');var t=i(4848),s=i(8453);const o={sidebar_position:2,title:"Week 1: ROS2 Architecture",description:"Understanding nodes, executors, and DDS"},d="Week 1: ROS2 Architecture",l={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"ROS2 Architecture Overview",id:"ros2-architecture-overview",level:2},{value:"Nodes: The Building Blocks",id:"nodes-the-building-blocks",level:2},{value:"Creating a Node in Python",id:"creating-a-node-in-python",level:3},{value:"Node Lifecycle",id:"node-lifecycle",level:3},{value:"Executors",id:"executors",level:2},{value:"Single-Threaded Executor (Default)",id:"single-threaded-executor-default",level:3},{value:"Multi-Threaded Executor",id:"multi-threaded-executor",level:3},{value:"DDS and Quality of Service (QoS)",id:"dds-and-quality-of-service-qos",level:2},{value:"QoS Profiles",id:"qos-profiles",level:3},{value:"Configuring QoS",id:"configuring-qos",level:3},{value:"Hands-On Exercise",id:"hands-on-exercise",level:2},{value:"Exercise 1: Create a Robot Status Node",id:"exercise-1-create-a-robot-status-node",level:3},{value:"Exercise 2: Multi-Node System",id:"exercise-2-multi-node-system",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Next Week",id:"next-week",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"week-1-ros2-architecture",children:"Week 1: ROS2 Architecture"})}),"\n",(0,t.jsx)(n.p,{children:"This week we dive deep into the core architecture of ROS2, understanding how its components work together."}),"\n",(0,t.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsx)(n.p,{children:"By the end of this week, you will:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Understand ROS2's layered architecture"}),"\n",(0,t.jsx)(n.li,{children:"Create and manage nodes"}),"\n",(0,t.jsx)(n.li,{children:"Configure executors for different use cases"}),"\n",(0,t.jsx)(n.li,{children:"Understand DDS and QoS settings"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"ros2-architecture-overview",children:"ROS2 Architecture Overview"}),"\n",(0,t.jsx)(n.mermaid,{value:'graph TB\n    subgraph "Application Layer"\n        A1[Node 1] \n        A2[Node 2]\n        A3[Node 3]\n    end\n    \n    subgraph "ROS2 Client Library"\n        B1[rclpy - Python]\n        B2[rclcpp - C++]\n    end\n    \n    subgraph "ROS Middleware Interface"\n        C[rcl - ROS Client Library]\n    end\n    \n    subgraph "RMW Implementation"\n        D1[rmw_fastrtps]\n        D2[rmw_cyclonedds]\n    end\n    \n    subgraph "DDS Layer"\n        E[Data Distribution Service]\n    end\n    \n    A1 --\x3e B1\n    A2 --\x3e B2\n    A3 --\x3e B1\n    B1 --\x3e C\n    B2 --\x3e C\n    C --\x3e D1\n    C --\x3e D2\n    D1 --\x3e E\n    D2 --\x3e E'}),"\n",(0,t.jsx)(n.h2,{id:"nodes-the-building-blocks",children:"Nodes: The Building Blocks"}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.strong,{children:"node"})," is a single-purpose executable that communicates with other nodes."]}),"\n",(0,t.jsx)(n.h3,{id:"creating-a-node-in-python",children:"Creating a Node in Python"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\nimport rclpy\nfrom rclpy.node import Node\n\nclass MyRobotNode(Node):\n    def __init__(self):\n        super().__init__('my_robot_node')\n        \n        # Create a timer that fires every 1 second\n        self.timer = self.create_timer(1.0, self.timer_callback)\n        self.counter = 0\n        \n        self.get_logger().info('Node initialized!')\n    \n    def timer_callback(self):\n        self.counter += 1\n        self.get_logger().info(f'Timer fired: {self.counter}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = MyRobotNode()\n    \n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"node-lifecycle",children:"Node Lifecycle"}),"\n",(0,t.jsx)(n.mermaid,{value:"stateDiagram-v2\n    [*] --\x3e Unconfigured: Create\n    Unconfigured --\x3e Inactive: configure()\n    Inactive --\x3e Active: activate()\n    Active --\x3e Inactive: deactivate()\n    Inactive --\x3e Unconfigured: cleanup()\n    Active --\x3e Finalized: shutdown()\n    Inactive --\x3e Finalized: shutdown()\n    Unconfigured --\x3e Finalized: shutdown()\n    Finalized --\x3e [*]"}),"\n",(0,t.jsx)(n.h2,{id:"executors",children:"Executors"}),"\n",(0,t.jsx)(n.p,{children:"Executors manage how callbacks are processed."}),"\n",(0,t.jsx)(n.h3,{id:"single-threaded-executor-default",children:"Single-Threaded Executor (Default)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.executors import SingleThreadedExecutor\n\nrclpy.init()\nnode = MyRobotNode()\nexecutor = SingleThreadedExecutor()\nexecutor.add_node(node)\n\ntry:\n    executor.spin()\nfinally:\n    executor.shutdown()\n    node.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"multi-threaded-executor",children:"Multi-Threaded Executor"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from rclpy.executors import MultiThreadedExecutor\n\nexecutor = MultiThreadedExecutor(num_threads=4)\nexecutor.add_node(node1)\nexecutor.add_node(node2)\nexecutor.spin()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"dds-and-quality-of-service-qos",children:"DDS and Quality of Service (QoS)"}),"\n",(0,t.jsx)(n.p,{children:"DDS (Data Distribution Service) is the communication standard underlying ROS2."}),"\n",(0,t.jsx)(n.h3,{id:"qos-profiles",children:"QoS Profiles"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Profile"}),(0,t.jsx)(n.th,{children:"Reliability"}),(0,t.jsx)(n.th,{children:"Durability"}),(0,t.jsx)(n.th,{children:"Use Case"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Sensor Data"}),(0,t.jsx)(n.td,{children:"Best Effort"}),(0,t.jsx)(n.td,{children:"Volatile"}),(0,t.jsx)(n.td,{children:"Camera, LiDAR"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Parameters"}),(0,t.jsx)(n.td,{children:"Reliable"}),(0,t.jsx)(n.td,{children:"Transient Local"}),(0,t.jsx)(n.td,{children:"Configuration"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Services"}),(0,t.jsx)(n.td,{children:"Reliable"}),(0,t.jsx)(n.td,{children:"Volatile"}),(0,t.jsx)(n.td,{children:"Request/Response"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Default"}),(0,t.jsx)(n.td,{children:"Reliable"}),(0,t.jsx)(n.td,{children:"Volatile"}),(0,t.jsx)(n.td,{children:"General use"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"configuring-qos",children:"Configuring QoS"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy\n\nsensor_qos = QoSProfile(\n    reliability=ReliabilityPolicy.BEST_EFFORT,\n    durability=DurabilityPolicy.VOLATILE,\n    depth=10\n)\n\nself.subscription = self.create_subscription(\n    Image,\n    'camera/image',\n    self.image_callback,\n    sensor_qos\n)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"hands-on-exercise",children:"Hands-On Exercise"}),"\n",(0,t.jsx)(n.h3,{id:"exercise-1-create-a-robot-status-node",children:"Exercise 1: Create a Robot Status Node"}),"\n",(0,t.jsx)(n.p,{children:"Create a node that:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Publishes robot status every 500ms"}),"\n",(0,t.jsx)(n.li,{children:"Uses appropriate QoS settings"}),"\n",(0,t.jsx)(n.li,{children:"Logs status changes"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"exercise-2-multi-node-system",children:"Exercise 2: Multi-Node System"}),"\n",(0,t.jsx)(n.p,{children:"Create two nodes:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"A sensor simulator node"}),"\n",(0,t.jsx)(n.li,{children:"A data processor node"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Have them communicate via a topic."}),"\n",(0,t.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Nodes"})," are single-purpose executables"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Executors"})," control callback processing"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DDS"})," provides reliable, real-time communication"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"QoS"})," settings must match between publisher and subscriber"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"next-week",children:"Next Week"}),"\n",(0,t.jsxs)(n.p,{children:["In Week 2, we'll explore ",(0,t.jsx)(n.strong,{children:"Topics, Services, and Actions"})," \u2014 the three communication paradigms in ROS2."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>d});var r=i(6540);const t={},s=r.createContext(t);function o(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);